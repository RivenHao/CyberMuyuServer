-- ************************************************************
-- 心愿数据初始化脚本
-- 使用方法: mysql -u root -p cyber_muyu < wish_seed.sql
-- ************************************************************

SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS=0;

-- 清空已有数据
DELETE FROM `wish_items`;
DELETE FROM `wish_categories`;

-- 重置自增ID
ALTER TABLE `wish_items` AUTO_INCREMENT = 1;
ALTER TABLE `wish_categories` AUTO_INCREMENT = 1;

-- 临时为 created_at/updated_at 设置默认值（Sequelize sync 可能未设置）
ALTER TABLE `wish_categories` 
  MODIFY `created_at` DATETIME DEFAULT CURRENT_TIMESTAMP,
  MODIFY `updated_at` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP;
ALTER TABLE `wish_items` 
  MODIFY `created_at` DATETIME DEFAULT CURRENT_TIMESTAMP,
  MODIFY `updated_at` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP;

-- 插入大类
INSERT INTO `wish_categories` (`id`, `name`, `icon`, `sort_order`) VALUES
(1, '求姻缘', '💕', 1),
(2, '求平安', '🏠', 2),
(3, '求福运', '🍀', 3),
(4, '求财运', '💰', 4),
(5, '求健康', '🌿', 5),
(6, '求学业', '🎓', 6);

-- 一、求姻缘（20条）
INSERT INTO `wish_items` (`category_id`, `content`, `sort_order`) VALUES
(1, '今年遇到一个能一起逛超市的人', 1),
(1, '今年情人节不再是一个人过', 2),
(1, '希望下一个情人节不再是一个人过', 3),
(1, '相亲能遇到靠谱的，不拖泥带水', 4),
(1, '能带那个ta回家见爸妈', 5),
(1, '遇到一个愿意陪我吃早饭的人', 6),
(1, '今年能给朋友发结婚请柬，而不是发份子钱', 7),
(1, '地铁上那个常遇到的男生/女生，希望能认识', 8),
(1, '年底前有人陪我跨年倒数', 9),
(1, '遇到一个不介意我养猫的人', 10),
(1, '今年能参加自己的订婚宴', 11),
(1, '有人陪我周末去爬山', 12),
(1, '遇到初中时那个曾先低头的人', 13),
(1, '今年生日有人送蛋糕', 14),
(1, '遇到一个能接住我烂梗的人', 15),
(1, '年底学堂会不再被问"还单着呢"', 16),
(1, '有人按我喜欢的菜格点的电影', 17),
(1, '今年能给对方买情侣装', 18),
(1, '遇到一个愿意听我碎碎念的人', 19),
(1, '明年春节能带对象回家过年', 20);

-- 二、求平安（20条）
INSERT INTO `wish_items` (`category_id`, `content`, `sort_order`) VALUES
(2, '下夜班回家的路，路灯都亮着', 1),
(2, '今年开车不被追尾', 2),
(2, '爸妈体检报告一切正常', 3),
(2, '雨天骑车不滑倒', 4),
(2, '救完加班后身体没出毛病', 5),
(2, '今年坐飞机起降平稳不颠簸', 6),
(2, '孩子上下学路上平平安安', 7),
(2, '走路不看手机，不摔跤', 8),
(2, '今年不用去医院挂急诊', 9),
(2, '出差路上一切顺利，没有延误', 10),
(2, '家里老人能自己下楼买菜', 11),
(2, '今没有深夜的紧急电话', 12),
(2, '租的房子没有安全隐患', 13),
(2, '今年不用帮家人叫救护车', 14),
(2, '每一个红灯都能平安停下来', 15),
(2, '孩子在学校不被欺负', 16),
(2, '今年不用去打官司', 17),
(2, '骑车时心不急，慢慢来', 18),
(2, '出门旅行，去的地方都安全', 19),
(2, '每天家都能安心关门', 20);

-- 三、求福运（20条）
INSERT INTO `wish_items` (`category_id`, `content`, `sort_order`) VALUES
(3, '抽十连出想要的', 1),
(3, '抽奖能抽到大奖', 2),
(3, '随手抽奖中一次一等奖', 3),
(3, '买饮料开盖再来一瓶', 4),
(3, '停车刚好有车位成功', 5),
(3, '今年能验证一次锦鲤', 6),
(3, '编号实际排在最前上', 7),
(3, '挂号能到专家号', 8),
(3, '抢购店开门就有货', 9),
(3, '彩票能中一次奖', 10),
(3, '一整年不丢东西不丢钱', 11),
(3, '手机电脑都永远不卡顿', 12),
(3, '洗手间永远不排队不用排队', 13),
(3, '约的餐厅都有好位子有空位', 14),
(3, '拍照一拍一张出大片', 15),
(3, '随机的位置都是好位子', 16),
(3, '打车永远都能快速接单', 17),
(3, '想买的东西刚好打折', 18),
(3, '每天出门一路绿灯', 19),
(3, '到回时间一路畅通', 20);

-- 四、求财运（20条）
INSERT INTO `wish_items` (`category_id`, `content`, `sort_order`) VALUES
(4, '今年工资能涨15%', 1),
(4, '能奖金够买一台新手机', 2),
(4, '房贷今年不涨利率', 3),
(4, '灵感金融理财大赚', 4),
(4, '副业做起来出一点成绩', 5),
(4, '跳槽能到满意的offer', 6),
(4, '副业能做到月入过万', 7),
(4, '今年能攒够10万', 8),
(4, '六的钱今年能还清', 9),
(4, '发年终奖的那天没被扣税太多', 10),
(4, '股票户头今年不亏', 11),
(4, '做的那个小项目能开始赚钱', 12),
(4, '信用卡每个月都不用分期还', 13),
(4, '今年不用再借钱给别人', 14),
(4, '花呗不用再分期了', 15),
(4, '手机不再有分期账单', 16),
(4, '请朋友吃饭不再心疼钱', 17),
(4, '今年能自己换个新貂', 18),
(4, '体检告今年没有贵项', 19),
(4, '话能赚到正当的外快', 20);

-- 五、求健康（20条）
INSERT INTO `wish_items` (`category_id`, `content`, `sort_order`) VALUES
(5, '今年体检没有新增异常项', 1),
(5, '每天能睡够7小时', 2),
(5, '肤质后三个月天天不长痘', 3),
(5, '肠胃消化不卡壳', 4),
(5, '颈椎不再酸痛太深', 5),
(5, '跑步能坚持跑3公里', 6),
(5, '过敏季不再打不停喷嚏', 7),
(5, '视力今年不下降', 8),
(5, '我的腰不弯了还能挺上', 9),
(5, '牙齿今年不再正畸之苦', 10),
(5, '喝冰水不拉肚子', 11),
(5, '减肥能减到目标体重', 12),
(5, '到了冬天手脚不冰凉', 13),
(5, '睡眠不再打呼噜', 14),
(5, '头发不再掉了不再脱发', 15),
(5, '体检告诉我没有三高', 16),
(5, '今年能自己做个新发型', 17),
(5, '皮肤告今年没有过敏', 18),
(5, '运动能坚持不半途而废', 19),
(5, '这能赚到正当的外快', 20);

-- 六、求学业（20条）
INSERT INTO `wish_items` (`category_id`, `content`, `sort_order`) VALUES
(6, '毕业论文一次通过', 1),
(6, '六级这次能过', 2),
(6, '期末英语不挂科', 3),
(6, '数学试题不太深', 4),
(6, '考研科目自己二把过', 5),
(6, '雅思考不低于6.5', 6),
(6, '申请到理想的学校', 7),
(6, '毕业答辩不紧张', 8),
(6, '发表论文能被录取', 9),
(6, '导师少改几次论文', 10),
(6, '小作业遇到靠谱队友', 11),
(6, '上课不再犯困打瞌睡', 12),
(6, '作业ddl前写得完', 13),
(6, '考试不用再补考一次成功', 14),
(6, '今年拿到上岸通知', 15),
(6, '奖学金名额有我', 16),
(6, '实习能转正', 17),
(6, '面试时脑子不空白', 18),
(6, '选课能选到心仪的课', 19),
(6, '答辩老师今天心情好', 20);

SET FOREIGN_KEY_CHECKS=1;

-- 验证
SELECT c.name, c.icon, COUNT(i.id) as item_count 
FROM wish_categories c 
LEFT JOIN wish_items i ON c.id = i.category_id 
GROUP BY c.id, c.name, c.icon
ORDER BY c.sort_order;
